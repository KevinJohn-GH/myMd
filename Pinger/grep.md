# grep

### grep是什么

- grep 全称：global search regular expression andprint ，全局搜索正则表达式斌打印输出

- grep会在文本文件中按照指定的模式进行全局搜索，并将结果打印输出

- 模式：可以理解为使用正则表达式定义好的一个规则

- 所有Linux系统中默认安装的都是GNU版顶点grep

### 语法结构

```grep OPTIONS PATTERN INPUT_FILE_NAMES```

- ``OPTIONS``:可以指定一个或多个
- ``PATTERN``:即为模式，当没有使用``-e PATTERN``或者``-f FILE``时，指定的PATTERN才能被gerp识别
- ``INPUT_FILE_NAMS``:可以指定0个或者多个INPUT_FIEL_NAMES

### 选项

#### 控制匹配模式

| 选项                                      | 描述                                       |
| --------------------------------------- | ---------------------------------------- |
| **-e PATTERN** <br>**--regexp=PATTRRN** | 显示指定使用此处的PATTERN作为待匹配的PATTERN；<br>该选项可以指定多次； |
| **-f FILE**<br>**--f =FILE**            | 从FILE中获取PATTERN列表，在文件中每行一个PATTERN;<br>空FILE表示不给定任何的PATTRN,故不会匹配到任何的内容 |
| **-i**<br>**-y**<br>**--ignore-case**   | 忽略PATTERN中的大小写，也忽略文件中的大小写区别；<br>-y选项已经废弃 |
| **-v**<br>**--invert-match**            | 反转匹配，即为选项未匹配中的的行                         |
| **-w**<br>**--word-regexp**             | 仅选择能够精确匹配整个单词的行；单词的组成包括：字母、数字、下划线，除了这些字符外其余都是该选项筛选单词时的单词边界分隔符；<br>例如单词'abc'和'ab', ``grep -w 'ab'``中，字符'ab'能够匹配 成功，但是'abc'匹配失败 |
| **-x**<br>**--line-re**                 | 仅选择能够精确匹配整行内容的行；<br>例如一行内容'abcd',``grep -x 'abcd'``能够匹配成功，但是``grep -x 'abc'``则匹配失败 |



 #### 控制输出内容

| 选项                                       | 描述                                       |
| ---------------------------------------- | ---------------------------------------- |
| **-c**<br>**--count**                    | 用于输出匹配到行的数量，即为对匹配成功的行进行计数，不输出匹配到的内容；<br> |
| **--color[=WHEN]**<br>**--colour[=WHEN]** | 对匹配到的内容赋予颜色输出；<br>WHEN可用的值包括：``never``,``always``,``auto``等 |
| **-L**<br>**--files-without-match**      | 不再输出匹配的内容，而是输出未能被匹配的文件名，当某文件中某行被成功匹配后，将不再继续向下搜索该文件；<br>例如：``grep -L '10' a.txt b.txt``表示输出两个文件中不包含'10'这个字符串的文件的文件名 |
| **-l**<br>**--files-with-matches**       | 不再输出匹配的内容，而是输出能被匹配的文件名，当某文件中某行被成功匹配后，将不再继续向下搜索该文件；<br>例如：``grep -l '10' a.txt b.txt``表示输出两个文件中包含'10'这个字符串的文件的文件名 |
| **-m NUM**<br>**--max-count=NUM**        | 当匹配成功的行有NUM行时，停止读取该文件，即文当某文件中匹配成功的行数达到-m选项指定的数量时，停止读取该文件；<br> |
| **-o**<br>**--only-matching**            | 输出成功匹配的字符串，而并非整行输出，每个被匹配到的字符串都用单独的行输出    |
| **-q**<br>**--quit**<br>**--silent**     | 静默模式，立即退出，即使遇到了错误，不写任何内容到标准输出。可移植脚本尽量避免使用-q |
| **-s**<br>**--no-messages**              | 禁止输出因文件不存在或文件没有读取权限而产生的错误信息；可移植脚本尽量避免使用-s |



#### 控制输出行前缀

| 选项                          | 描述                        |
| --------------------------- | ------------------------- |
| **-n**<br>**--line-number** | 输出匹配内容在文件中的行号，每个文件都单独从1开始 |



#### 控制输出行的上下文

| 选项                                       | 描述                                       |
| ---------------------------------------- | ---------------------------------------- |
| **-A NUM**<br>**--after-context=NUM**    | 除了输出匹配到的行，还输出匹配到内容的后NUM行                 |
| **-B NUM**<br>**--before-context=NUM**   | 除了输出匹配到的行，还输出匹配到内容的前NUM行                 |
| **-C NUM**<br>**-NUM**<br>**--context=NUM** | 除了输出匹配到的行，还输出匹配到内容的前NUM行和后NUM行           |
| **--group-separator=STRING**<br>****     | 当使用'A' , 'B'  or 'C' 时，使用STRING替代默认的组分隔符 |
| **--no-group-separator**<br>****         | 当使用'A' , 'B'  or 'C' 时，不输出任何分隔符，而是将不同组相邻输出 |



#### 文件与目录的选择

| 选项                                    | 描述                           |
| ------------------------------------- | ---------------------------- |
| **--exclude-dir=DIR**<br>****         | 筛选出不进行递归的目录，使用DIR进行匹配        |
| **--include=GLOB**<br>****            | 只搜索basename能够被GLOB匹配的文件      |
| **-r**<br>**--recursive**             | 从命令行中给定的目录中递归进去，搜索其中的每个文件和目录 |
| **-R**<br>**--dereference-recursive** | 从命令行中给定的目录中递归进去，搜索其中的每个文件和目录 |

